<!DOCTYPE html> 
<html> 
	<head> 
	<meta charset="utf-8" /> 
	<title>iOS Inspired jQuery Mobile Theme</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"> 	 
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link href="distt/css/jq.css" rel="stylesheet" />
	<link href="ios_inspired/styles.css" rel="stylesheet" />
	<link href="distt/css/jquery.counter-analog2.css" media="screen" rel="stylesheet" type="text/css" />

	<script src="distt/js/jquery.js"></script>
	<script src="distt/js/jquery.counter.js" type="text/javascript"></script>
	<script>
		// all dialog buttons should close their parent dialog
		$(".ui-dialog button").live("click", function() {		
			$("[data-role='dialog']").dialog("close");		
		});
		$(document).on("mobileinit", function(){
		  $.mobile.defaultPageTransition = "slide";
		});
	</script>
	<script src="distt/js/jquery_m.js"></script>
	<style>
		#footerTabs {
			background: #FFF -webkit-radial-gradient(circle, #FFF, #dee2e4);
		}
		.ui-listview sup {
			font-size: 0.6em;
			color: #cc0000;
		}
		
		.counter1{
       		position: absolute;
       		top: 58%; 
       		bottom: 2px;
       		border:  1px solid red;

        }
		.counter2{
       		position: absolute;
       		top: 55px; 
       		bottom: 40%; 

        }
        #count{

			position: absolute;
		    left: 50%;
		    top: 40%;
		    width: 278px;
		    height: 70px;
		    margin-left: -139px;
		    margin-top: -35px;
		}
		#moves1,#moves2{
			font-size: 27px

		}
		#moves2{
			color: white;
		}
	</style>

</head> 
<body> 
<div data-role="page"> 
 
	<div data-role="header" data-position="fixed" > 
		<h1>Chess Counter</h1>
	</div><!-- /header --> 

	<div data-role="content"> 

		<ul data-role="listview" data-inset="true"> 
			<li><a href="#counter" id="Start">Start</a></li> 
			<li><a href="#Settings">Settings</a></li> 
			<li><a href="#footerTabs">About</a></li> 
		</ul> 
					
		<br />
			
		<br />
 
	</div><!-- /ui-body wrapper -->	
</div><!-- /page --> 


<!-- Counter container -->
	<div data-role="page" id="counter">
 
	<div data-role="header" data-position="fixed">
		<h1>Counter</h1>
		<a href="#" data-rel="back" data-theme="a">Back</a>
		<a href="#" data-theme="c" id="playAndPause">READY !</a>
	</div><!-- /header --> 
 
		<div data-role="content" style="" id="counter_content"> 
			<div class="counter2 counters" style="width:95%;background:black" >
				<div id="count">
			    	<span id="counter2" ></span>

        			<div class="statics">
        				<div id="mov"><img src="distt/css/images/moves.png" /><span id="moves2">0</span></div>
        			</div>

			   	</div>
			</div>
			<div class="counter1 counters" style="width:95%;background:white" >
				<div id="count">
        			<span id="counter1" ></span>

        			<div class="statics">
        				<div id="mov"><img src="distt/css/images/moves.png" /><span id="moves1">0</span></div>
        			</div>
        		</div>
        	</div>
		</div>

	</div>

	<div data-role="page" id="Settings">
 
	<div data-role="header" data-position="fixed">
		<h1>Counter</h1>
		<a href="#" data-rel="back" data-theme="a">Back</a>
		<a href="#" data-theme="d" id="settings_done">Done !</a>
	</div><!-- /header --> 
 
		<div data-role="content" style="" id="Settings_ct"> 
			<select>
				<option value="5">5</option>
				<option value="7">7</option>
				<option value="10">10</option>
				<option value="15">15</option>
				<option value="17">17</option>
				<option value="20">20</option>
				<option value="25">25</option>
				<option value="30">30</option>
				<option value="35">35</option>
				<option value="45">40</option>
				<option value="50">50</option>
				<option value="55">55</option>
				<option value="60">60</option>
				<option value="65">65</option>
				<option value="70">70</option>
				<option value="75">75</option>
				<option value="80">80</option>
				<option value="85">85</option>
				<option value="90">90</option>
				<option value="95">95</option>
				<option value="100">100</option>
			</select>
		</div>

	</div>
	
</div>





    <script>
        //$('.counter').counter();
        counter1=0;
        counter2=0;
        moves1=0;
        moves2=0;
        $("#Start").click(function(){
	        counter1=0;
	        counter2=0;
	        moves1=0;
	        moves2=0;
	        $('#counter1').addClass('counter-analog2').counter({
	            initial: '00:05',
	            direction: 'down',
	            //interval: '100',
	            format: '59:59',
	            stop: '00:00'
	        });

	        $('#counter2').addClass('counter-analog2').counter({
	            initial: '05:00',
	            direction: 'down',
	            //interval: '100',
	            format: '59:59',
	            stop: '00:00'
	        });
			$("#counter1").counter("stop");
		$("#counter2").counter("stop");
		});

        $("#counter_content").click(function(){
        	time_switch();

        });
        function time_switch(){
    		time1 = $.trim($("#counter1").text()).split("\n")[0];
    		time2 = $.trim($("#counter2").text()).split("\n")[0];
    		if(time1!="00:00" && time2!="00:00"){

	        	if (counter1==1 && counter2==0){
	        		$("#counter1").counter("stop");
	        		$("#counter2").counter("play");
	        		counter1=0;
	        		counter2=1;
	        		moves1+=1;
	        		$("#moves1").text(moves1);
	        	}else if(counter1==0 && counter2==1){
	        		$("#counter1").counter("play");
	        		$("#counter2").counter("stop");
	        		counter1=1;
	        		counter2=0;
	        		moves2+=1;
	        		$("#moves2").text(moves2);
	        	}else if(counter1==0 && counter2==0){
		        		$("#counter1").counter("play");
		        		$("#counter2").counter("stop");
		        		counter1=1;
		        		counter2=0;
		        		//$("#playAndPause").html("&nbsp;PAUSE&nbsp;");
	        	}

        	}else{
        		$("#counter1").counter("stop");
        		$("#counter2").counter("stop");
        	}
        }
        $('.counter1').on('counterStop', function() {
        	time = $.trim($(this).text()).split("\n")[0];
        	console.log(time);
		    if (time=="00:00"){
		    	alert("winn");
		    }
		});
        $('.counter2').on('counterStop', function() {
        	time = $.trim($(this).text()).split("\n")[0];
        	console.log(time);
		    if (time=="00:00"){
		    	alert("winn");
		    }
		});

		$("#playAndPause").click(function(){
			status = $.trim($(this).text());
			console.log(status);
			if (status=="PLAY"){
	        	if (counter1==1 && counter2==0){
	        		$("#counter1").counter("play");
	        		$("#counter2").counter("stop");

	        	}else if(counter1==0 && counter2==1){
	        		$("#counter1").counter("stop");
	        		$("#counter2").counter("play");

	        	}
				//$("#playAndPause").html("<span class=\"ui-btn-inner ui-btn-corner-all\"><span class=\"ui-btn-text\">PAUSE</span></span>");
				$("#playAndPause span span").text("PAUSE")

			}else if(status=="PAUSE"){console.log("stoppppp");
        		$("#counter1").counter("stop");
        		$("#counter2").counter("stop");

        		//$("#playAndPause").html("<span class=\"ui-btn-inner ui-btn-corner-all\"><span class=\"ui-btn-text\">PLAY</span></span>");
        		$("#playAndPause span span").text("PLAY")
			}else if(status=="READY !" ){
				time_switch();
				//$("#playAndPause").html("<span class=\"ui-btn-inner ui-btn-corner-all\"><span class=\"ui-btn-text\">PAUSE</span></span>");
				$("#playAndPause span span").text("PAUSE")
			}

		});
    </script>